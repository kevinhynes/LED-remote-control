<AnimationsScreen>:
    MDScrollView:
        do_scroll_x: False
        scroll_distance: dp(150)
        AnimationsList:
            id: anm_list_


<AnimationsList>:
    spacing: dp(5)


<AnimationExpansionPanel>:
    id: panel_
    top_panel: tp_
    control_panel_tray: control_panel_tray_
    orientation: 'vertical'
    size_hint:  (0.9, None)
    height: dp(50)
    md_bg_color: app.theme_cls.primary_light
    MDRelativeLayout:
        # Need this so ControlPanel is under TopPanel
        ControlPanelTray:
            id: control_panel_tray_
            orientation: 'vertical'
            size_hint: (1, None)
            height: max(dp(50), panel_.height - tp_.height)
        TopPanel:
            id: tp_
            panel: panel_


<TopPanel>:
    anim_icon: anim_icon_
    name_lbl: name_lbl_
    orientation: 'horizontal'
    pos_hint: {'top': 1}
    size_hint: (1, None)
    height: dp(50)
    md_bg_color: app.theme_cls.primary_dark
    MDRelativeLayout:
        id: tp_left_
        MDBoxLayout:
            size_hint: (1, 1)
            padding: dp(3)
            pos_hint: {'center_y': 0.5}
            AnimationExpansionPanelIconButton:
                id: anim_icon_
                icon: 'data/comet.png'
        Label:
            id: name_lbl_
            text: 'Comet'
            font_style: 'Button'
    MDRelativeLayout:
        id: tp_right_
        MDIconButton:
            id: toggle_expansion_btn_
            icon: 'chevron-down'
            pos_hint: {'right': 1}
            on_release:
                root.panel.contract() if root.panel.is_expanded else root.panel.expand()
        Label:
            text: 'Comet'
            font_style: 'Button'


<AnimationExpansionPanelIconButton@MDIconButton>:
    # Testing comet animation
    icon: "data/comet.png"
    size_hint: (None, 1)
    width: self.height
    line_color: app.theme_cls.bg_light
    line_width: dp(0.5)
    canvas.before:
        Color:
            rgba: 0, 0, 0, 0.2  # Shadow color (adjust opacity as needed)
        Ellipse:
            pos: self.x + dp(2), self.y - dp(2)  # Adjust shadow position
            size: self.width, self.height
        Color:
            rgba: 1, 1, 1, 0.5  # Shadow color (adjust opacity as needed)
        Ellipse:
            pos: self.x, self.y   # Adjust shadow position
            size: self.width, self.height

#  To make a new control panel, inherit from ControlPanel and explicitly size
#  all child widgets.
<ControlPanel>:
    orientation: 'vertical'
    adaptive_height: True
    spacing: dp(5)


<BreatheControls>:
    ControlLabel:
        text: "Animation Speed".upper()
    ControlSlider:
        id: animation_speed_slider_
    ControlSeparator:
    ControlLabel:
        text: "Palette Selection".upper()
    MDBoxLayout:
        size_hint: (0.5, None)
        pos_hint: {'center_x': 0.5}
        height: dp(50)
        md_bg_color: (1, 0, 0, 0.4)
        MDRaisedButton:
            size_hint: (None, None)
            height: dp(30)
            width: dp(150)
            pos_hint: {'center_x': 0.5}
            md_bg_color: (0, 1, 0, 0.4)
    ControlSeparator:



<ScrollControls>:
    ControlLabel:
        text: "Animation Speed".upper()
    ControlSlider:
        id: animation_speed_slider_
    ControlSeparator:
    ControlLabel:
        text: "Palette Selection".upper()


<SplatterControls>:
    ControlLabel:
        text: "Animation Speed".upper()
    ControlSlider:
        id: animation_speed_slider_
    ControlSeparator:
    ControlLabel:
        text: "Palette Selection".upper()
    MDFlatButton:
        text: "TEST"
        halign: 'center'


<TwinkleControls>:
    ControlLabel:
        text: "Animation Speed".upper()
    ControlSlider:
    ControlSeparator:
    ControlLabel:
        text: "Trail Length".upper()
    ControlSlider:
    ControlSeparator:
    MDFlatButton:
        text: "Test"


<CometControls>:
    ControlLabel:
        text: "Animation Speed".upper()
    ControlSlider:
        id: animation_speed_slider_
    ControlSeparator:
    ControlLabel:
        text: "Trail Length".upper()
    ControlSlider:
        id: trail_length_
    ControlSeparator:
    ControlLabel:
        text: "Number of Comets".upper()
    ControlSlider:
        id: num_comets_
    ControlSeparator:
    MDBoxLayout:
        orientation: 'horizontal'
        size_hint: (1, None)
        height: dp(50)
        ControlLabel:
            text: "Mirror?".upper()
        MDCheckbox:
            active: False
    ControlSeparator:


<ControlSlider@MDSlider>:
    size_hint: (0.9, None)
    height: dp(50)
    pos_hint: {'center_x': 0.5}
    hint: False
    canvas:
        Color:
            rgba: 0, 0, 0, 0.2
        Line:
            rounded_rectangle: self.x, self.y, self.width, self.height, dp(10), dp(10)

<ControlLabel@MDLabel>:
    size_hint: (0.8, None)
    pos_hint: {'center_x': 0.5}
    height: dp(15)
    font_size: sp(10)
    font_style: 'Overline'
    halign: 'left'
    valign: 'bottom'


<ControlSeparator@MDSeparator>:
    size_hint_x: 0.95
    pos_hint: {'center_x': 0.5}
    height: dp(4)
    canvas:
        Color:
            rgba: (0, 0, 0, 0.5)
        Rectangle:
            pos: (self.x, self.y + dp(2))
            size: self.width, self.height - dp(2)