#:import PaletteWidget palettes_screen.PaletteWidget
#:import BreatheControls animations_list.BreatheControls
#:import Window kivy.core.window


<AnimationsList>:
    id: anm_list_
    spacing: dp(5)
    BreatheDrawer:
        device_controller: root.device_controller
        anm_list: anm_list_
    BreezeDrawer:
        device_controller: root.device_controller
        anm_list: anm_list_
    SplatterDrawer:
        device_controller: root.device_controller
        anm_list: anm_list_
    TwinkleDrawer:
        device_controller: root.device_controller
        anm_list: anm_list_
    CometDrawer:
        device_controller: root.device_controller
        anm_list: anm_list_


<AnimationDrawer>:
    size_hint: (1, None)
    height: dp(50)


<BreatheDrawer>:
    control_panel: breathe_cp_
    header_panel: breathe_header_
    HeaderPanel:
        id: breathe_header_
        drawer: root
        name: 'Breathe'
        icon_filepath: 'data/wind3.png'
        pos_hint: {'top': 1}
    BreatheControls:
        id: breathe_cp_
        animation_id: 1
        device_controller: root.device_controller
        pos_hint: {'bottom': 0}
        x: Window.width


<BreezeDrawer>:
    control_panel: breeze_cp_
    header_panel: breeze_header_
    HeaderPanel:
        id: breeze_header_
        drawer: root
        name: 'Breeze'
        icon_filepath: 'data/breeze.png'
        pos_hint: {'top': 1}
    BreezeControls:
        id: breeze_cp_
        animation_id: 2
        device_controller: root.device_controller
        pos_hint: {'bottom': 0}
        x: Window.width


<SplatterDrawer>:
    header_panel: splatter_header_
    control_panel: splatter_cp_
    HeaderPanel:
        id: splatter_header_
        drawer: root
        name: 'Splatter'
        icon_filepath: 'data/paint.png'
        pos_hint: {'top': 1}
    SplatterControls:
        id: splatter_cp_
        animation_id: 3
        device_controller: root.device_controller
        pos_hint: {'bottom': 0}
        x: Window.width


<TwinkleDrawer>:
    header_panel: twinkle_header_
    control_panel: twinkle_cp_
    HeaderPanel:
        id: twinkle_header_
        drawer: root
        name: 'Twinkle'
        icon_filepath: 'data/star.png'
        pos_hint: {'top': 1}
    TwinkleControls:
        id: twinkle_cp_
        animation_id: 4
        device_controller: root.device_controller
        pos_hint: {'bottom': 0}
        x: Window.width


<CometDrawer>:
    header_panel: comet_header_
    control_panel: comet_cp_
    HeaderPanel:
        id: comet_header_
        drawer: root
        name: 'Comet'
        icon_filepath: 'data/comet.png'
        pos_hint: {'top': 1}
    CometControls:
        id: comet_cp_
        animation_id: 5
        device_controller: root.device_controller
        pos_hint: {'bottom': 0}
        x: Window.width


<HeaderPanel>:
    orientation: 'horizontal'
    pos_hint: {'top': 1}
    size_hint: (1, None)
    height: dp(50)
    md_bg_color: app.theme_cls.primary_dark
    MDRelativeLayout:
        id: header_left_
        MDBoxLayout:
            size_hint: (1, 1)
            padding: dp(3)
            pos_hint: {'center_y': 0.5}
            AnimationIconButton:
                id: header_icon_
                icon: root.icon_filepath
        Label:
            id: header_lbl_
            text: root.name
    MDRelativeLayout:
        id: header_right_
        MDIconButton:
            id: toggle_drawer_btn_
            icon: 'chevron-down'
            pos_hint: {'right': 1}
            _no_ripple_effect: True
            on_release: root.drawer.toggle_interlocked_drawer()


<AnimationIconButton@MDIconButton>:
    size_hint: (None, 1)
    width: self.height
    line_color: app.theme_cls.bg_light
    line_width: dp(0.5)
    canvas.before:
        Color:
            rgba: 0, 0, 0, 0.2  # Shadow color (adjust opacity as needed)
        Ellipse:
            pos: self.x + dp(2), self.y - dp(2)  # Adjust shadow position
            size: self.width, self.height
        Color:
            rgba: 1, 1, 1, 0.5  # Shadow color (adjust opacity as needed)
        Ellipse:
            pos: self.x, self.y   # Adjust shadow position
            size: self.width, self.height


#  To make a new control panel, inherit from ControlPanel and explicitly size
#  all child widgets.
<ControlPanel>:
    orientation: 'vertical'
    adaptive_height: True
    spacing: dp(5)


<BreatheControls>:
    ControlLabel:
        text: "Palette Selection".upper()
    MDBoxLayout:
        size_hint: (0.95, None)
        height: dp(50)
        pos_hint: {'center_x': 0.5}
        MDRelativeLayout:
            id: palette_container_
            size_hint: (1, 1)
            pos_hint: {'center_x': 0.5}
            radius: (dp(15), dp(15))
            md_bg_color: (0, 0, 0, 0.1)
            PaletteWidget:
        MDIconButton:
            icon: 'launch'
            on_release: root.open_palettes_screen()
    ControlSeparator:
    ControlLabel:
        text: "Animation Speed".upper()
    ControlSlider:
        id: animation_speed_slider_


<BreezeControls>:
    ControlLabel:
        text: "Palette Selection".upper()
    MDBoxLayout:
        size_hint: (0.95, None)
        height: dp(50)
        pos_hint: {'center_x': 0.5}
        MDRelativeLayout:
            id: palette_container_
            size_hint: (1, 1)
            pos_hint: {'center_x': 0.5}
            radius: (dp(15), dp(15))
            md_bg_color: (0, 0, 0, 0.1)
            PaletteWidget:
        MDIconButton:
            icon: 'launch'
            on_release: root.open_palettes_screen()
    ControlSeparator:
    ControlLabel:
        text: "Animation Speed".upper()
    ControlSlider:
        id: animation_speed_slider_


<SplatterControls>:
    ControlLabel:
        text: "Palette Selection".upper()
    MDBoxLayout:
        size_hint: (0.95, None)
        height: dp(50)
        pos_hint: {'center_x': 0.5}
        MDRelativeLayout:
            id: palette_container_
            size_hint: (1, 1)
            pos_hint: {'center_x': 0.5}
            radius: (dp(15), dp(15))
            md_bg_color: (0, 0, 0, 0.1)
            PaletteWidget:
        MDIconButton:
            icon: 'launch'
            on_release: root.open_palettes_screen()
    ControlSeparator:
    ControlLabel:
        text: "Animation Speed".upper()
    ControlSlider:
        id: animation_speed_slider_


<TwinkleControls>:
    ControlLabel:
        text: "Palette Selection".upper()
    MDBoxLayout:
        size_hint: (0.95, None)
        height: dp(50)
        pos_hint: {'center_x': 0.5}
        MDRelativeLayout:
            id: palette_container_
            size_hint: (1, 1)
            pos_hint: {'center_x': 0.5}
            radius: (dp(15), dp(15))
            md_bg_color: (0, 0, 0, 0.1)
            PaletteWidget:
        MDIconButton:
            icon: 'launch'
            on_release: root.open_palettes_screen()
    ControlSeparator:
    ControlLabel:
        text: "Animation Speed".upper()
    ControlSlider:
        id: animation_speed_slider_


<CometControls>:
    ControlLabel:
        text: "Palette Selection".upper()
    MDBoxLayout:
        size_hint: (0.95, None)
        height: dp(50)
        pos_hint: {'center_x': 0.5}
        MDRelativeLayout:
            id: palette_container_
            size_hint: (1, 1)
            pos_hint: {'center_x': 0.5}
            radius: (dp(15), dp(15))
            md_bg_color: (0, 0, 0, 0.1)
            PaletteWidget:
        MDIconButton:
            icon: 'launch'
            on_release: root.open_palettes_screen()
    ControlSeparator:
    ControlLabel:
        text: "Animation Speed".upper()
    ControlSlider:
        id: animation_speed_slider_
    ControlSeparator:
    ControlLabel:
        text: "Trail Length".upper()
    ControlSlider:
        id: trail_length_
    ControlSeparator:
    ControlLabel:
        text: "Number of Comets".upper()
    ControlSlider:
        id: num_comets_
    ControlSeparator:
    MDBoxLayout:
        orientation: 'horizontal'
        size_hint: (1, None)
        height: dp(50)
        ControlLabel:
            text: "Mirror?".upper()
        MDCheckbox:
            active: False
    ControlSeparator:


<ControlSlider@MDSlider>:
    size_hint: (0.9, None)
    height: dp(50)
    pos_hint: {'center_x': 0.5}
    hint: False
    step: 1
    canvas:
        Color:
            rgba: 0, 0, 0, 0.2
        Line:
            rounded_rectangle: self.x, self.y, self.width, self.height, dp(10), dp(10)

<ControlLabel@MDLabel>:
    size_hint: (0.8, None)
    pos_hint: {'center_x': 0.5}
    height: dp(15)
    font_size: sp(10)
    font_style: 'Overline'
    halign: 'left'
    valign: 'bottom'


<ControlSeparator@MDSeparator>:
    size_hint_x: 0.95
    pos_hint: {'center_x': 0.5}
    height: dp(4)
    canvas:
        Color:
            rgba: (0, 0, 0, 0.5)
        Rectangle:
            pos: (self.x, self.y + dp(2))
            size: self.width, self.height - dp(2)

